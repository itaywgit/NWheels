<!DOCTYPE html>
<html ng-app="theApp" ng-controller="appStart">
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
HEAD, JS/CSS LINKS
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title ng-bind="translate(app.text) + ' | ' + translate(currentScreen.text)">LOADING . . .</title>
    <base href="##BASE_URL##" />

    <link href="skin/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="skin/assets/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/datetimepicker/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet">

    <!-- Toastr style -->
    <link href="skin/assets/css/plugins/toastr/toastr.min.css" rel="stylesheet">
    
    <!--script src="assets/plugins/datajs-1.1.1/datajs-1.1.1.js"></script-->
    
    <link href="skin/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="skin/assets/font-awesome/css/font-awesome.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/chosen/chosen.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/colorpicker/bootstrap-colorpicker.min.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/cropper/cropper.min.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/switchery/switchery.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/jasny/jasny-bootstrap.min.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/nouslider/jquery.nouislider.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/ionRangeSlider/ion.rangeSlider.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/clockpicker/clockpicker.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/daterangepicker/daterangepicker-bs3.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/isteven-multi-select/isteven-multi-select.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/jqGrid/ui.jqgrid.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/jQueryUI/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
    <link href="skin/assets/css/animate.css" rel="stylesheet">
    <link href="skin/assets/css/style.css" rel="stylesheet">

    <!-- Data Tables -->
    <link href="skin/assets/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/dataTables/dataTables.responsive.css" rel="stylesheet">
    <link href="skin/assets/css/plugins/dataTables/dataTables.tableTools.min.css" rel="stylesheet">

    <style>
        @media (min-width: 768px) {
            .b-col {
                float: right;
            }
        }
        .btn-md.btn-circle {
            width: 36px;
            height: 36px;
            border-radius: 23px;
        }
        .ibox-title.nested {
            border: none;
            padding: 15px 20px 0px 20px;
        }
        .ibox-content.standalone {
            border-top: 0;
            padding-top: 5px;
        }
        .ibox-content.nested {
            border: none;
            padding: 20px 20px 10px 20px;
        }
        .ibox-content.nested .ibox-title {
            border: 0;
            padding: 0;
        }
        .ibox-content.nested .ibox-content {
            border: 0;
            padding: 0;
        }
        .ibox-content .tabs-container {
            padding: 10px;
            background-color: #EEEEEE;
            border-radius: 5px;            
        }
        .alert .glyphicon{
            display:table-cell;
        }
        .alert div,
        .alert span{
            padding-left: 10px;
            display:table-cell;
        }
        .alert span.moreInfo {
            padding:0;
            margin:0;
            display: inline;
        }
        .alert span.techInfo {
            display: block;
            margin-top: 10px;
            padding: 0;
            font-size: 9pt;
        }
        .alert button {
            margin: 10px 5px 0 0;
        }
        .alert-dismissable .close {
            top: -10px;
            right: -30px;
        }    
        .ibox-title h2 {
            display: inline-block;
            margin: 0 0 7px;
            padding: 0;
            text-overflow: ellipsis;
            float: left;
        }
        .ui-jqgrid .jqgrid-overlay {
            position: absolute;
            height: 100%;
            width: 100%;
        }        
    </style>
</head>

<body>
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    PAGE BODY
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <div id="wrapper" ng-if="app">
        <uidl-screen ng-if="currentScreen" uidl="currentScreen"></uidl-screen>
        <uidl-widget uidl="uidl.modalAlert"></uidl-widget>
        <uidl-ellipsis-lookup-search></uidl-ellipsis-lookup-search>
    </div>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL SCREEN
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-screen">
        <uidl-widget uidl="uidl.contentRoot"></uidl-widget>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL SCREEN PART
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-screen-part">
        <uidl-widget uidl="uidl.contentRoot"></uidl-widget>
        <uidl-widget ng-repeat="popup in uidl.popupContents" uidl="popup"></uidl-widget>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL USER ALERT - INLINE
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-user-alert-inline">
        <div ng-if="alert.current"
             class="alert alert-dismissable"
             ng-class="{
                'alert-info':alert.current.uidl.type==='Info',
                'alert-success':alert.current.uidl.type==='Success',
                'alert-warning':alert.current.uidl.type==='Warning',
                'alert-danger':alert.current.uidl.type==='Error'
             }"
             style="text-align:left;">
            <button ng-if="!alert.current.uidl.resultChoices.length" aria-hidden="true" class="close" type="button" ng-click="answerAlert('None')">×</button>
            <i class="fa fa-lg glyphicon"
               ng-class="{
                   'fa-info':alert.current.uidl.type==='Info',
                   'fa-check-square':alert.current.uidl.type==='Success',
                   'fa-exclamation-triangle':alert.current.uidl.type==='Warning',
                   'fa-times-circle':alert.current.uidl.type==='Error'
               }"></i>
            <span>
                {{translate(alert.current.uidl.text)}}
                <span ng-if="alert.current.parameters.reason" class="moreInfo">
                    <br/>{{alert.current.parameters.reason}}
                </span>
                <br ng-if="alert.current.uidl.resultChoices.length" />
                <button ng-repeat="choice in alert.current.uidl.resultChoices"
                        class="btn btn-xs btn-primary"
                        ng-class="{
                            'btn-info':alert.current.uidl.type==='Info',
                            'btn-success':alert.current.uidl.type==='Success',
                            'btn-warning':alert.current.uidl.type==='Warning',
                            'btn-danger':alert.current.uidl.type==='Error'
                        }"
                        ng-click="answerAlert(choice);">
                    {{::translate(choice)}}
                </button>
                <span ng-if="alert.current.faultInfo" class="techInfo">
                    <a class="alert-link" data-toggle="modal" data-target="#divModalTechnicalInfo"><i class="fa fa-xs fa-angle-double-right"></i>&nbsp;technical info</a>
                </span>
            </span>
        </div>
    </script>
 
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL USER ALERT - TECHNICAL INFO POPUP
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <div class="modal inmodal" id="divModalTechnicalInfo" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <i class="fa fa-bug modal-icon"></i>
                    <h4 class="modal-title">technical info</h4>
                </div>
                <div class="modal-body">
                    <pre style="height:500px;word-wrap:normal;">{{userAlertTechnicalInfo}}</pre>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-white" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    IFRAME FOR 'BEGIN DOWNLOAD' BEHAVIOR
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

    <iframe id="iframe_content_download" style="display:none;"></iframe>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL USER ALERT - MODAL
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/ModalUserAlert">
        <div class="modal inmodal fade" id="divModal_{{uidl.elementName}}" tabindex="-1" role="dialog"  aria-hidden="true" data-backdrop="static">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <i  class="fa modal-icon pull-left" style="margin-top:-20px;"
                            ng-class="{
                               'fa-info':alert.uidl.type==='Info',
                               'fa-check-square':alert.uidl.type==='Success',
                               'fa-exclamation-triangle':alert.uidl.type==='Warning',
                               'fa-times-circle':alert.uidl.type==='Error'
                            }"></i>
                        <h6 class="modal-title" style="padding-right:50px;">
                            {{translate(alert.uidl.type)}}
                        </h6>
                    </div>
                    <div class="modal-body">
                        {{translate(alert.uidl.text)}}
                    </div>
                    <div class="modal-footer">
                        <button 
                            ng-repeat="choice in alert.uidl.resultChoices"
                            class="btn btn-w-m"
                            style="margin-left:5px;"
                            ng-class="{
                                'btn-info':alert.uidl.type==='Info',
                                'btn-success':alert.uidl.type==='Success',
                                'btn-warning':alert.uidl.type==='Warning',
                                'btn-danger':alert.uidl.type==='Error'
                            }"
                            ng-click="answerAlert(choice);">
                            {{::translate(choice)}}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_ModalUserAlert($scope) {
            $("#divModal_" + $scope.uidl.elementName).modal({backdrop: 'static', keyboard: false});
            $("#divModal_" + $scope.uidl.elementName).on('hidden', function () {
                answerAlert('Cancel');
            });
            $scope.$on($scope.uidl.qualifiedName + ':ShowModal', function () {
                $("#divModal_" + $scope.uidl.elementName).modal('show', {backdrop: 'static', keyboard: false});
            });
            $scope.$on($scope.uidl.qualifiedName + ':HideModal', function () {
                $("#divModal_" + $scope.uidl.elementName).modal('hide');
            });
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - SPLASH
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Splash">
        <uidl-widget uidl="uidl.insideContent"></uidl-widget>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - USER LOGIN FORM
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/UserLoginForm">
        <div class="middle-box text-center loginscreen animated fadeInDown">
            <div>
                <div>
                    <h1 class="logo-name">AFP</h1>
                </div>
                <h2>Sign In</h2>
                <p ng-if="model.State.LoginFault!='PasswordExpired'">Log in to your account.</p>
                <form class="m-t" role="form" ng-if="model.State.LoginFault!='PasswordExpired'" id="{{::uidl.elementName}}" novalidate>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Your Name" required="" ng-model="model.Data.LoginName" name="loginName" id="{{::uidl.elementName}}_name">
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" placeholder="Password" required="" ng-model="model.Data.Password" name="password" id="{{::uidl.elementName}}_password">
                    </div>
                    <button class="btn btn-primary block full-width m-b" ng-click="invokeCommand('LogIn')">{{translate('Login')}}</button>
                </form>
                <p ng-if="model.State.LoginFault=='PasswordExpired'">Please change your password.</p>
                <form class="m-t" role="form" ng-if="model.State.LoginFault=='PasswordExpired'" novalidate>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Your Name" required="" ng-model="model.Data.LoginName" >
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" placeholder="Current Password" required="" ng-model="model.Data.Password" >
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-control" placeholder="New Password" required="" ng-model="model.Data.NewPassword" >
                    </div>
                    <button class="btn btn-primary block full-width m-b" ng-click="invokeCommand('ChangePassword')">Change Password</button>
                </form>
            </div>                
                <p class="m-t"> <small>Powered by BitWize</small> </p>
            <uidl-user-alert-inline alert="inlineUserAlert"></uidl-user-alert-inline>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_UserLoginForm($scope) {
            $('#' + $scope.uidl.elementName).validate();
            $scope.invokeCommand = function(commandName) {
                if ($('#' + $scope.uidl.elementName).valid()===true) {
                    $scope.$emit($scope.uidl.qualifiedName + ':' + commandName + ':Executing');
                }
            };
        }
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - CURRENT LOGGED-IN USER
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/LoggedInUserWidget">
        <a href="" ng-click="$emit(uidl.qualifiedName + ':LogOut:Executing')">
            <i class="fa fa-sign-out"></i> {{translate('LogOut')}}
        </a>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - PROFILE PHOTO
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/UserProfilePhoto">
        <div class="dropdown profile-element"> <span>
            <img ng-if="model.State.ProfilePhotoId" alt="image" class="img-circle" ng-src="entity/queryImage/{{uidl.entityName}}/{{model.State.ProfilePhotoId}}/{{uidl.imageTypeProperty}}/{{uidl.imageContentProperty}}">
             </span>
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">{{model.State.PersonFullName}}</strong>
             </span> <span class="text-muted text-xs block">{{model.State.UserRoles[0]}} <b class="caret"></b></span> </span> </a>
            <!--ul class="dropdown-menu animated fadeInRight m-t-xs">
                <li><a href="profile.html">Profile</a></li>
                <li><a href="contacts.html">Contacts</a></li>
                <li><a href="mailbox.html">Mailbox</a></li>
                <li class="divider"></li>
                <li><a href="login.html">Logout</a></li>
            </ul-->
        </div>    
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - MANAGEMENT CONSOLE
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/ManagementConsole">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header" style="padding-top:45px;padding-bottom:100px;">
                        <uidl-widget uidl="uidl.profilePhoto"></uidl-widget>
                        <div class="logo-element">
                            IN+
                        </div>
                    </li>
                    <li ng-repeat="item in uidl.mainMenu.items" ng-include="'uidl-element-template/ManagementConsole-menu-item'"></li>
                </ul>
            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg">
            <div class="row border-bottom">
                <nav class="navbar navbar-static-top gray-bg" role="navigation" style="margin-bottom: 0">
                    <div class="navbar-header">
                        <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>                        
                        <form role="search" class="navbar-form-custom" action="search_results.html">
                            <div class="form-group">
                                <!--input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search"-->
                            </div>
                        </form>
                    </div>
                    <ul class="nav navbar-top-links navbar-right">
                        <li>
                            <h3 class="text-muted welcome-message" style="padding: 20px 10px 20px 10px;margin:0;">{{::translate(appScope.uidl.text)}}</h3>
                        </li>
                        <!--li class="dropdown">
                            <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                                <i class="fa fa-envelope"></i>  <span class="label label-warning">16</span>
                            </a>
                            <ul class="dropdown-menu dropdown-messages">
                                <li>
                                    <div class="dropdown-messages-box">
                                        <a href="profile.html" class="pull-left">
                                            <img alt="image" class="img-circle" src="img/a7.jpg">
                                        </a>
                                        <div class="media-body">
                                            <small class="pull-right">46h ago</small>
                                            <strong>Mike Loreipsum</strong> started following <strong>Monica Smith</strong>. <br>
                                            <small class="text-muted">3 days ago at 7:58 pm - 10.06.2014</small>
                                        </div>
                                    </div>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <div class="dropdown-messages-box">
                                        <a href="profile.html" class="pull-left">
                                            <img alt="image" class="img-circle" src="img/a4.jpg">
                                        </a>
                                        <div class="media-body ">
                                            <small class="pull-right text-navy">5h ago</small>
                                            <strong>Chris Johnatan Overtunk</strong> started following <strong>Monica Smith</strong>. <br>
                                            <small class="text-muted">Yesterday 1:21 pm - 11.06.2014</small>
                                        </div>
                                    </div>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <div class="dropdown-messages-box">
                                        <a href="profile.html" class="pull-left">
                                            <img alt="image" class="img-circle" src="img/profile.jpg">
                                        </a>
                                        <div class="media-body ">
                                            <small class="pull-right">23h ago</small>
                                            <strong>Monica Smith</strong> love <strong>Kim Smith</strong>. <br>
                                            <small class="text-muted">2 days ago at 2:30 am - 11.06.2014</small>
                                        </div>
                                    </div>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <div class="text-center link-block">
                                        <a href="mailbox.html">
                                            <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </li-->
                        <!--li class="dropdown">
                            <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                                <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
                            </a>
                            <ul class="dropdown-menu dropdown-alerts">
                                <li>
                                    <a href="mailbox.html">
                                        <div>
                                            <i class="fa fa-envelope fa-fw"></i> You have 16 messages
                                            <span class="pull-right text-muted small">4 minutes ago</span>
                                        </div>
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="profile.html">
                                        <div>
                                            <i class="fa fa-twitter fa-fw"></i> 3 New Followers
                                            <span class="pull-right text-muted small">12 minutes ago</span>
                                        </div>
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a href="grid_options.html">
                                        <div>
                                            <i class="fa fa-upload fa-fw"></i> Server Rebooted
                                            <span class="pull-right text-muted small">4 minutes ago</span>
                                        </div>
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <div class="text-center link-block">
                                        <a href="notifications.html">
                                            <strong>See All Alerts</strong>
                                            <i class="fa fa-angle-right"></i>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </li-->                        
                        <li ng-repeat="widget in uidl.statusBar.containedWidgets">
                            <uidl-widget uidl="widget"></uidl-widget>
                        </li>
                     </ul>
                </nav>  
            </div>
            <div class="row wrapper border-bottom white-bg page-heading" style="padding-bottom:15px;margin-bottom:15px;">
                <div class="col-lg-10">
                    <h2>{{translate(mainContentScreenPart.text)}}</h2>
                    <ol class="breadcrumb">
                        <li><a href="##BASE_URL##">Home</a></li>
                        <li class="active"><strong>{{translate(mainContentScreenPart.text)}}</strong></li>
                    </ol>
                </div>
            </div>            
            <div class="wrapper wrapper-content  animated fadeInRight">
                <uidl-widget uidl="uidl.mainContent"></uidl-widget>
            </div>
        </div>
        <uidl-user-alert-inline alert="userAlert"></uidl-user-alert-inline>
    </script>
    <script type="text/javascript">
        function initWidget_ManagementConsole($scope){
            $scope.$timeout(function() {
                $('#side-menu').metisMenu();
            });
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - MANAGEMENT CONSOLE MENU ITEM
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/ManagementConsole-menu-item">
        <a ng-class="{bold: item.level==0}" ng-show="item.subItems.length==0" href="#" ng-click="$emit(item.notifications[1].qualifiedName)"><i ng-if="item.icon" style="width:19px;" class="fa fa-{{::item.icon}}"></i>{{::translate(item.text)}}</a>
        <a href="#" ng-show="item.subItems.length > 0">
            <i ng-if="item.icon" style="width:16px;" class="fa fa-{{::item.icon}}"></i>
            <span class="nav-label" ng-class="{bold: item.level==0}">{{::translate(item.text)}}</span>
            <span class="fa arrow"></span>
        </a>
        <ul class="nav nav-second-level collapse">
            <li ng-repeat="item in item.subItems" ng-include="'uidl-element-template/ManagementConsole-menu-item'"></li>
        </ul>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - CONTAINER
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Container">
        <uidl-widget ng-repeat="widget in uidl.containedWidgets" uidl="widget"></uidl-widget>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - LAYOUT HORIZONTAL
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/LayoutHorizontal">
        <table cellpadding="0" cellspacing="0" border="0" width="100%">
            <tr>
                <td style="vertical-align: top;" ng-repeat="widget in uidl.containedWidgets">
                    <uidl-widget uidl="widget"></uidl-widget>
                </td>
            </tr>
        </table>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - SCREEN PART CONTAINER
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/ScreenPartContainer">
        <uidl-user-alert-inline alert="userAlert"></uidl-user-alert-inline>
        <uidl-screen-part ng-if="currentScreenPart" uidl="currentScreenPart"></uidl-screen-part>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - TEXT
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Text">
        <h2 ng-if="uidl.textSize==='HugeHeader'">{{translate(model.State.Contents)}}</h2>
        <h3 ng-if="uidl.textSize==='LargeHeader'">{{translate(model.State.Contents)}}</h3>
        <h4 ng-if="uidl.textSize==='Header'">{{translate(model.State.Contents)}}</h4>
        <span ng-if="uidl.textSize==='Normal'">{{translate(model.State.Contents)}}</span>
        <small ng-if="uidl.textSize==='HugeHeader'">{{translate(model.State.Contents)}}</small>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - GAUGE
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Gauge">
        <div class="ibox float-e-margins">
            <div class="ibox-title" style="border-color: #1C84C6;">
                <span class="label label-success pull-right"></span>
                <h3>{{::translate(uidl.text)}}</h3>
            </div>
            <div ng-repeat="value in model.State.values" class="ibox-content text-right">
                <h3 ng-if="$first" class="pull-left">
                    <!--span class="label label-success">{{::translate(value.title)}}</span-->
                    <span ng-if="value.alertType" class="label label-warning"><i class="fa fa-warning"></i>&nbsp;{{::translate(value.alertText)}}</span>
                </h3>
                <h1 ng-if="$first" class="no-margins">{{::value.value}}</h1>
                <!--span ng-if="!$first" class="label label-success pull-left">{{::translate(value.title)}}</span-->
                <h3 ng-if="!$first" class="no-margins">{{::value.value}}</h3>
                <small>{{::translate(value.title)}}</small>
            </div>
            <!--div class="ibox-content text-right">
                <span class="label label-success pull-left">Last 7 days</span>
                <h3 class="no-margins">234,567</h3>
            </div>
            <div class="ibox-content text-right">
                <span class="label label-success pull-left">This month</span>
                <h3 class="no-margins">1,234,567</h3>
            </div-->
        </div>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - CRUD
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Crud">
        <div class="row">
            <div ng-hide="uiShowCrudForm" class="col-lg-12">
                <div class="ibox-title" ng-class="{'standalone':uidl.mode==='Standalone', 'nested':uidl.mode!=='Standalone'}">
                    <button class="btn btn-primary btn-circle btn-outline" ng-class="{'btn-lg':uidl.mode==='Standalone', 'btn-md':uidl.mode!=='Standalone'}" style="margin-right:5px" type="button" ng-click="newEntity();" ng-disabled="commandInProgress" ng-show="entityAuth.create" title="Add New">
                        <i class="fa fa-plus"></i>
                    </button>
                    <button class="btn btn-success btn-circle btn-outline" ng-class="{'btn-lg':uidl.mode==='Standalone', 'btn-md':uidl.mode!=='Standalone'}" style="margin-right:5px" type="button" ng-click="editEntity(selectedEntity)" ng-disabled="commandInProgress || !selectedEntity" ng-show="entityAuth.update" title="Edit Selected">
                        <i class="fa fa-edit"></i>
                    </button>
                    <button class="btn btn-danger btn-circle btn-outline" ng-class="{'btn-lg':uidl.mode==='Standalone', 'btn-md':uidl.mode!=='Standalone'}" style="margin-right:5px" type="button" ng-click="deleteEntity(selectedEntity)" ng-disabled="commandInProgress || !selectedEntity" ng-show="entityAuth.delete" title="Delete Selected">
                        <i class="fa fa-times"></i>
                    </button>
                    <button class="btn btn-default btn-circle btn-outline" ng-class="{'btn-lg':uidl.mode==='Standalone', 'btn-md':uidl.mode!=='Standalone'}" style="margin-right:5px" type="button" ng-click="refresh()" ng-disabled="commandInProgress" title="Refresh">
                        <i class="fa fa-refresh"></i>
                    </button>
                    <button 
                        ng-repeat="command in uidl.entityCommands"
                        type="button"
                        class="btn btn-rounded"
                        style="margin-right:5px;"
                        ng-disabled="commandInProgress || !selectedEntity"
                        ng-click="invokeEntityCommand(command)"
                        ng-class="{'btn-success':command.severity=='Read','btn-primary':command.severity=='Change','btn-warning':command.severity=='Loose','btn-danger':command.severity=='Destroy','btn-lg':uidl.mode=='Standalone','btn-md':uidl.mode!='Standalone'}"
                    ><i ng-if="command.icon" class="fa fa-{{::command.icon}}">&nbsp;</i>{{::translate(command.text)}}</button>
                </div>
                <div class="ibox-content" ng-class="{'standalone':uidl.mode==='Standalone', 'nested':uidl.mode!=='Standalone'}">
                    <uidl-widget uidl="uidl.grid" parent-model="model"></uidl-widget>
                </div>
            </div>
            
            <div ng-show="uiShowCrudForm" class="col-lg-12">
                <div class="ibox-title">
                    <h2 class="clearfix">
                        <i class="fa text-muted" ng-class="{'fa-asterisk':model.isNew, 'fa-edit':!model.isNew}"></i>
                        &nbsp;{{translate(uidl.entityName)}}
                    </h2>
                </div>
                <div class="ibox-content">
                    <uidl-widget ng-if="uidl.form" uidl="uidl.form"></uidl-widget>
                    <uidl-widget ng-if="uidl.formTypeSelector" uidl="uidl.formTypeSelector" parent-model="model"></uidl-widget>
                </div>
                <div class="ibox-content" style="padding-top:15px;">
                    <button 
                        ng-repeat="command in uidl.commands"
                        type="button"
                        class="btn btn-rounded"
                        style="margin-right:5px;"
                        ng-disabled="commandInProgress"
                        ng-click="invokeCommand(command)"
                        ng-class="{'btn-success':command.severity=='Read','btn-primary':command.severity=='Change','btn-warning':command.severity=='Loose','btn-danger':command.severity=='Destroy','btn-lg':uidl.mode=='Standalone','btn-md':uidl.mode!='Standalone'}"
                    ><i ng-if="command.icon" class="fa fa-{{::command.icon}}">&nbsp;</i>{{::translate(command.text)}}</button>
                </div>
            </div>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_Crud($scope) {
            //...
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - DATA GRID
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/DataGrid">
        <div class="jqGrid_wrapper">
            <table id="rdt_{{uniqueWidgetId}}"></table>
            <div id="rdtpager_{{uniqueWidgetId}}"></div>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_DataGrid($scope) {
            var columnsModel = [];
            $scope.gridColumns.forEach(function (metaColumn, idx) {
                columnsModel.push({
                    name: metaColumn.expression,
                    label: $scope.translate(metaColumn.title),
                    index: metaColumn.expression,
                    editable: false,
                    width: (metaColumn.size==='Large' ? 360 : (metaColumn.size==='Small' ? 90 : 180)),
                    searchoptions: (metaColumn.isText ? {sopt: ['cn']} : {sopt: ['eq']}),
                    search: metaColumn.isFilterSupported,
                    sortable: metaColumn.isSortSupported,
                    //sorttype: column.dataType,
                });
            });
            
            $scope.onDataReceived = function (event, data) {
                $scope.ResultSet = data;
                for (var  i = 0; i < data.length; i++) {
                    data[i]['$index'] = i;
                }
                $scope.$timeout(function () {
                    $('#rdt_' + $scope.uniqueWidgetId).jqGrid('GridUnload');
                    $("#rdt_" + $scope.uniqueWidgetId).jqGrid({
                        datatype: 'local',
                        localReader: {
                           id: "$index",
                        },
                        data: data,
                        loadonce: true,
                        //height: ($scope.uidl.mode === 'Standalone' ? 350 : 150),
                        rownumWidth: 45,
                        shrinkToFit: false,
                        width: null,
                        height: '100%',
                        rowNum: 20,
                        rowList: $scope.uidl.pageSizeOptions || [10, 20, 30],
                        pager: "#rdtpager_" + $scope.uniqueWidgetId,
                        colModel: columnsModel,
                        gridview: true,
                        viewrecords: true,
                        add: false,
                        edit: false,
                        rownumbers: true,
                        hidegrid: false,
                        ignoreCase: true,
                        onSelectRow: function (rowId) {
                            var rowObject = $(this).getLocalRow(rowId);
                            var dataObject = Enumerable.From($scope.ResultSet).FirstOrDefault(null, '$.$index===' + rowObject['$index']);
                            if (dataObject) {
                                $scope.$emit($scope.uidl.qualifiedName + ':ObjectSelected', dataObject);
                            }
                        }
                    });
                    var grid = $("#rdt_" + $scope.uniqueWidgetId);
                    grid.parents('div.ui-jqgrid-bdiv').css('min-height', ($scope.uidl.mode === 'Standalone' ? '200px' : '100px'));
                    if ($scope.uidl.mode === 'Standalone') {
                        grid.jqGrid('filterToolbar',{ searchOnEnter: false, defaultSearch: "cn" });
                    }
                    //grid[0].addJSONData(data);
                });
            };
            $scope.$on($scope.uidl.qualifiedName + ':DataReceived', $scope.onDataReceived);

            $scope.onRequestPrepared = function (event, request) {
                $scope.preparedRequest = request;
                $scope.$timeout(function () {
                    $("#rdt_" + $scope.uniqueWidgetId).jqGrid('GridUnload');
                    $scope.totalsRowDisplayed = false;
                    var gridOptions = {
                        datatype: function(postData) {
                            var queryBuilder = (request.query ? request.query.clone() : new EntityQueryBuilder($scope.uidl.entityName, request.url));
                            if (postData.sidx) {
                                queryBuilder.orderBy(postData.sidx, postData.sord==='asc');
                            }
                            for (var i = 0; i < $scope.uidl.includedProperties.length; i++) {
                                queryBuilder.include($scope.uidl.includedProperties[i]);
                            }
                            if (postData._search === true) {
                                var filterObject = JSON.parse(postData.filters);
                                for (var i = 0; i < filterObject.rules.length; i++) {
                                    var rule = filterObject.rules[i];
                                    queryBuilder.where(rule.field, rule.data, rule.op);
                                }
                            }
                            queryBuilder.take(postData.rows);
                            queryBuilder.page(postData.page);
                            var requestUrl = queryBuilder.getQueryUrl();
                            var grid = $("#rdt_" + $scope.uniqueWidgetId);
                            grid[0].grid.beginReq();
                            $scope.$http.post(
                                requestUrl,
                                $scope.preparedRequest.data
                            ).then(
                                function(response){
                                    grid[0].grid.endReq();
                                    $scope.ResultSet = response.data.ResultSet;
                                    $scope.entityService.trackRetrievedEntities(response.data.ResultSet);
                                    var thegrid = $("#rdt_" + $scope.uniqueWidgetId);
                                    thegrid[0].addJSONData(response.data);
                                    $scope.$emit($scope.uidl.qualifiedName + ':QueryCompleted', response.data.ResultSet);
                                },
                                function(faultResponse){
                                    grid[0].grid.endReq();
                                    $scope.ResultSet = null;
                                    var faultInfo = $scope.commandService.createFaultInfo(faultResponse);
                                    $scope.$emit($scope.uidl.qualifiedName + ':QueryFailed', faultInfo);
                                }
                            );
                        },
                        jsonReader: {
                            total: 'PageCount',
                            page: 'PageNumber',
                            records: 'ResultCount',
                            root: 'ResultSet'
                        },
                        //height: ($scope.uidl.mode === 'Standalone' ? 350 : 150),
                        shrinkToFit: false,
                        width: null,
                        height: '100%',
                        rownumWidth: 45,
                        rowNum: ($scope.uidl.pageSizeOptions && $scope.uidl.pageSizeOptions.length ? $scope.uidl.pageSizeOptions[0] : ($scope.uidl.mode === 'Standalone' ? 10 : 5)),
                        rowList: $scope.uidl.pageSizeOptions || [10, 20, 50],
                        colModel: columnsModel,
                        pager: "#rdtpager_" + $scope.uniqueWidgetId,
                        viewrecords: true,
                        rownumbers: true,
                        footerrow: ($scope.uidl.enableTotalRow===true),
                        add: false,
                        edit: false,
                        hidegrid: false,
                        loadui: 'block',
                        ignoreCase: true,
                        onSelectRow: function (rowId) {
                            if ($scope.uidl.enableAutonomousQuery) {
                                var rowObject = $scope.ResultSet[rowId - 1];
                                $scope.$emit($scope.uidl.qualifiedName + ':ObjectSelected', rowObject);
                            } else {
                                $scope.$emit($scope.uidl.qualifiedName + ':ObjectSelectedByIndex', rowId - 1);
                            }
                        },
                        subGrid: $scope.uidl.enableDetailPane,
                        subGridOptions: { expandOnLoad: $scope.uidl.detailPaneExpanded },
                        subGridRowExpanded: function(subgrid_id, row_id) {
                            var rowData = $scope.ResultSet[row_id - 1];
                            var element = $("#" + subgrid_id);
                            var childScope = $scope.$rootScope.$new(true, $scope);
                            childScope.uidl = $scope.uidl.detailPaneWidget;
                            childScope.data = rowData;
                            //rowData.$detailPaneScope = childScope;
                            var template = '<uidl-widget uidl="uidl" parent-model="data"></uidl-widget>';
                            element.html(template);
                            $scope.$compile(element.contents())(childScope);
                            //var compiledDom = $scope.$compile(template)(childScope);
                            //element.html(compiledDom);
                            //console.log(element.scope());
                            //element.html(template);
                            //$scope.$compile(element.contents())(childScope);

                            /*
                            $scope.uidlService.loadTemplateById($scope.uidl.detailPaneWidget.templateName).then(
                                function(template) {
                                    var childScope = $scope.$rootScope.$new(true, $scope);
                                    childScope.rowData = rowData;
                                    element.html(template);
                                    $scope.$compile(element.contents())(childScope);
                                },
                                function(error) {
                                    element.html("<span style='color:red'>Failed to load</span>");
                                }
                            );
                            */
                        },
                        subGridRowColapsed: function(subgrid_id, row_id) {
                            //var rowData = $scope.ResultSet[row_id - 1];
                            //var childScope = rowData.$detailPaneScope = childScope;
                            return false;
                        },
                        gridComplete: function () {
                            var grid = $('#rdt_' + $scope.uniqueWidgetId);
                            if ($scope.uidl.enableDetailPane && $scope.uidl.detailPaneExpanded) {
                                var rowIds = $('#rdt_' + $scope.uniqueWidgetId).getDataIDs();
                                $.each(rowIds, function (index, rowId) {
                                    grid.expandSubGridRow(rowId); 
                                });
                            }
                            if ($scope.uidl.enableTotalRow && !$scope.totalsRowDisplayed) {
                                var totalSpec = { };
                                var totalsQueryBuilder = (
                                    $scope.preparedRequest.query ? 
                                    $scope.preparedRequest.query.clone() : 
                                    new EntityQueryBuilder($scope.uidl.entityName, $scope.preparedRequest.url));
                                
                                $scope.gridColumns.forEach(function (metaColumn, idx) {
                                    if (idx===0) {
                                        totalSpec[metaColumn.expression] = 'Total:';
                                    } else if (metaColumn.includeInTotal) {
                                        totalSpec[metaColumn.expression] = '...';
                                        totalsQueryBuilder.select(metaColumn.expression, 'sum');
                                    }
                                });
                                grid.jqGrid("footerData", "set", totalSpec);
                                var totalsRequestUrl = totalsQueryBuilder.getQueryUrl();
                                $scope.$http.post(
                                    totalsRequestUrl,
                                    $scope.preparedRequest.data
                                ).then(
                                    function(response){
                                        $scope.gridColumns.forEach(function (metaColumn, idx) {
                                            if (metaColumn.includeInTotal) {
                                                totalSpec[metaColumn.expression] = response.data.ResultSet[0][metaColumn.expression];
                                            }
                                        });
                                        grid.jqGrid("footerData", "set", totalSpec);
                                        $scope.totalsRowDisplayed = true;
                                    },
                                    function(faultResponse){
                                        var faultInfo = $scope.commandService.createFaultInfo(faultResponse);
                                        $scope.$emit($scope.uidl.qualifiedName + ':QueryFailed', faultInfo);
                                    }
                                );
                                
                                grid.jqGrid("footerData", "set", totalSpec);
                                //if ($scope.uidl.totalRowOnTop) {
                                //    var gview = grid.closest("ui-jqgrid-view"); // get div#gview_list
                                //    $("div.ui-jqgrid-sdiv",gview[0]).after($("div.ui-jqgrid-bdiv",gview[0]));
                                //}
                            }
                            if ($(this).jqGrid('getGridParam', 'reccount') == 0)
                            {         
                                $(".jqgfirstrow").css("height","1px");
                            }                            
                        }
                    };
                    var grid = $("#rdt_" + $scope.uniqueWidgetId);
                    grid.jqGrid(gridOptions);
                    grid.jqGrid('filterToolbar',{ stringResult: true, searchOnEnter: false, defaultSearch: "cn" });
                    grid.parents('div.ui-jqgrid-bdiv').css('min-height', ($scope.uidl.mode === 'Standalone' ? '200px' : '100px'));
                });
            };
            $scope.$on($scope.uidl.qualifiedName + ':RequestPrepared', $scope.onRequestPrepared);
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - LOOKUP GRID
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/LookupGrid">
        <div class="jqGrid_wrapper">
            <table id="rdt_{{uniqueWidgetId}}"></table>
            <div id="rdtpager_{{uniqueWidgetId}}"></div>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_LookupGrid($scope) {
            $scope.$on($scope.uidl.qualifiedName + ':DataReceived', function (event, data) {
                $scope.ResultSet = data;
                $scope.$timeout(function () {
                    $('#rdt_' + $scope.uniqueWidgetId).jqGrid('GridUnload');

                    var columnsModel = [];

                    columnsModel.push({
                        name: "isChecked",
                        label: "Select",
                        formatter: "checkbox",
                        formatoptions: { disabled: false },
                        edittype: "checkbox",
                        width: 80
                    });

                    $scope.gridColumns.forEach(function (metaColumn, idx) {
                        columnsModel.push({
                            name: metaColumn.expression,
                            label: $scope.translate(metaColumn.title),
                            index: metaColumn.expression,
                            editable: false,
                            width: 180,
                            //sorttype: metaColumn.dataType,
                            search: true
                        });
                    });

                    $("#rdt_" + $scope.uniqueWidgetId).jqGrid({
                        datatype: 'local',
                        localReader: {
                           id: '$id',
                        },
                        data: data,
                        height: 150,
                        shrinkToFit: false,
                        rownumWidth: 45,
                        width: null,
                        rowNum: 5,
                        rowList: [5, 10, 20],
                        colModel: columnsModel,
                        pager: "#rdtpager_" + $scope.uniqueWidgetId,
                        viewrecords: true,
                        rownumbers: true,
                        add: false,
                        edit: false,
                        hidegrid: false,
                        loadComplete: function () {
                            var rows = this.rows;
                            var rowCount = rows.length;
                            for (var i = 1; i < rowCount; i++) {
                                $(rows[i].cells[1]).click(function (e) {
                                    var id = $(e.target).closest('tr')[0].id;
                                    var isChecked = $(e.target).is(':checked');
                                    $scope.updateCheckboxModel(id, isChecked);
                                });
                            }
                        }
                    });
                });
            });
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL ELLIPSIS LOOKUP - MODAL
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/EllipsisLookupSearchModal">
        <div class="modal inmodal fade" id="divModal_EllipsisLookupSearchModal" tabindex="-1" role="dialog"  aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header" style="padding:15px">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <i class="fa modal-icon fa-search pull-left" style="font-size:28pt;"></i>
                        <h6 class="modal-title" style="padding-right:50px;">
                            Search Entity
                        </h6>
                    </div>
                    <div class="modal-body">
                        <uidl-widget ng-if="lookupContext" uidl="lookupContext.dataGridUidl"></uidl-widget>
                    </div>
                    <div class="modal-footer">
                        <button 
                            type="button"
                            class="btn btn-w-m btn-warning"
                            ng-click="clearSelection()"
                        ><i class="fa fa-times">&nbsp;</i>Clear</button>
                        <button 
                            type="button"
                            class="btn btn-w-m btn-success"
                            ng-disabled="isSelectButtonDisabled()"
                            ng-click="lookupObjectSelected(selectedLookupObject)"
                        ><i class="fa fa-check">&nbsp;</i>Select</button>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_EllipsisLookupSearchModal($scope) {
            $scope.unbindDataGridObjectSelected = null;
            $scope.selectedLookupObject = null;
        
            $scope.showLookupSearchModal = function() {
                $('#divModal_EllipsisLookupSearchModal').modal('show', {backdrop: 'static', keyboard: false});
            };
            $scope.hideLookupSearchModal = function() {
                $('#divModal_EllipsisLookupSearchModal').modal('hide');
            };
            $scope.isSelectButtonDisabled = function() {
                return ($scope.selectedLookupObject===null);
            };
 
            $scope.$watch('lookupContext', function(newValue, oldValue) {
                $scope.selectedLookupObject = null;
            
                if ($scope.unbindDataGridObjectSelected) {
                    $scope.unbindDataGridObjectSelected();
                    $scope.unbindDataGridObjectSelected = null;
                }
                
                if (newValue) {
                    $scope.unbindDataGridObjectSelected = $scope.$on(newValue.dataGridUidl.qualifiedName + ':ObjectSelected', function(event, data) {
                        $scope.selectedLookupObject = data;
                        $scope.$apply();
                    });
                }
            });
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - ENTITY METHOD FORM
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/EntityMethodForm">
        <div class="modal inmodal fade" id="divModal_{{uidl.elementName}}" tabindex="-1" role="dialog"  aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <i class="fa modal-icon fa-{{::uidl.icon}} pull-left" style="margin-top:-20px;"></i>
                        <h6 class="modal-title" style="padding-right:50px;">
                            {{translate(uidl.text)}}
                        </h6>
                    </div>
                    <div class="modal-body">
                        <uidl-widget uidl="uidl.inputForm"></uidl-widget>
                    </div>
                    <div class="modal-footer">
                        <button 
                            ng-repeat="command in uidl.commands"
                            type="button"
                            class="btn btn-w-m"
                            style="margin-left:5px;"
                            ng-disabled="commandInProgress"
                            ng-click="invokeCommand(command)"
                            ng-class="{'btn-success':command.severity=='Read','btn-primary':command.severity=='Change','btn-warning':command.severity=='Loose','btn-danger':command.severity=='Destroy','btn-lg':uidl.mode=='Standalone','btn-md':uidl.mode!='Standalone'}"
                        ><i ng-if="command.icon" class="fa fa-{{::command.icon}}">&nbsp;</i>{{::translate(command.text)}}</button>
                    </div>
                </div>
            </div>
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_EntityMethodForm($scope) {
            $scope.$on($scope.uidl.qualifiedName + ':ShowModal', function () {
                $("#divModal_" + $scope.uidl.elementName).modal('show');
            });
            $scope.$on($scope.uidl.qualifiedName + ':HideModal', function () {
                $("#divModal_" + $scope.uidl.elementName).modal('hide');
            });
        }
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - TRANSACTION FORM
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/TransactionForm">
        <div class="panel panel-success">
            <div class="panel-heading">
                <i ng-if="uidl.icon" class="fa fa-{{::uidl.icon}}"></i> {{::translate(uidl.text)}}
            </div>
            <div ng-if="uidl.inputForm" class="panel-body">
                <uidl-widget uidl="uidl.inputForm" parent-model="model.State.Input"></uidl-widget>
            </div>
            <uidl-widget ng-if="uidl.inputFormTypeSelector" uidl="uidl.inputFormTypeSelector" parent-model="model.State"></uidl-widget>
        </div>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - TRANSACTION FORM WITH LOGIN STYLE
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/TransactionFormLoginStyle">
        <div class="middle-box text-center loginscreen animated fadeInDown">
            <div>
                <div>
                    <h1 class="logo-name">AFP</h1>
                </div>
                <h2>{{::translate(uidl.text)}}</h2>
                <p ng-if="uidl.helpText">{{::translate(uidl.helpText)}}</p>
                
                <uidl-widget uidl="uidl.inputForm" parent-model="model.State.Input"></uidl-widget>
            </div>                
            <p class="m-t"> <small>Powered by BitWize</small> </p>
            <uidl-user-alert-inline alert="inlineUserAlert"></uidl-user-alert-inline>
        </div>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - FORM
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Form">
        <form class="form-horizontal" id="{{::uidl.elementName}}">
            <!-- PLAIN FIELDS SINGLE COLUMN LAYOUT -->
            <div ng-if="plainFields.length <= 6" class="form-group" style="margin-bottom:0px;" ng-repeat="field in plainFields">
                <label class="control-label"
                       ng-class="{'col-lg-2':!uidl.isModalPopup, 'col-lg-4':uidl.isModalPopup}"
                       for="{{::uidl.elementName + '_' + field.propertyName}}">{{::translate(field.propertyName)}}</label>
                <div ng-class="{'col-lg-3':!uidl.isModalPopup, 'col-lg-6':uidl.isModalPopup}">
                    <uidl-form-field parent-uidl="uidl" uidl="field" entity="model.Data.entity" />
                    <!--span class="help-block m-b-none">Example block-level help text here.</span-->
                </div>
            </div>
            <!-- PLAIN FIELDS TWO-COLUMN LAYOUT -->
            <div ng-if="plainFields.length > 6" class="form-group" style="margin-bottom:0px;" ng-repeat="field in plainFields | twoColumnRows">
                <label class="col-lg-2 control-label"
                       for="{{::uidl.elementName + '_' + field.propertyName}}">{{::translate(field.propertyName)}}</label>
                <div class="col-lg-3">
                    <uidl-form-field parent-uidl="uidl" uidl="field" entity="model.Data.entity" />
                    <!--span class="help-block m-b-none">Example block-level help text here.</span-->
                </div>
                <label ng-if="field['$nextCol']"
                       class="col-lg-2 control-label"
                       for="{{::uidl.elementName + '_' + field['$nextCol'].propertyName}}">{{::translate(field['$nextCol'].propertyName)}}</label>
                <div ng-if="field['$nextCol']" class="col-lg-3">
                    <uidl-form-field parent-uidl="uidl" uidl="field['$nextCol']" entity="model.Data.entity" />
                    <!--span class="help-block m-b-none">Example block-level help text here.</span-->
                </div>
            </div>
            <!-- TABS -->
            <div ng-if="tabSetFields.length" class="tabs-container" style="margin-top:20px;">
                <ul class="nav nav-tabs">
                    <li ng-class="{active: $index == tabSetIndex}" ng-repeat="field in tabSetFields"><a ng-click="selectTab($index)">{{translate(field.propertyName)}}</a></li>
                </ul>
                <div class="tab-content">
                    <div ng-repeat="field in tabSetFields" ng-class="{'tab-pane': true, active: $index == tabSetIndex}" ng-show="$index == tabSetIndex">
                        <div class="ibox-content nested">
                            <uidl-widget ng-if="field.nestedWidget" uidl="field.nestedWidget" parent-uidl="field" parent-model="model.Data.entity"></uidl-widget>
                        </div>
                    </div>
                </div>
            </div>
            <!-- COMMAND BUTTONS -->
            <div ng-if="uidl.commands.length" class="form-group">
                <div class="col-lg-5 clearfix">
                    <button ng-repeat="command in uidl.commands | reverse"
                            type="button"
                            class="btn btn-rounded btn-lg pull-right"
                            style="margin-right:5px;"
                            ng-disabled="commandInProgress"
                            ng-class="{'btn-success':command.severity=='Read','btn-primary':command.severity=='Change','btn-warning':command.severity=='Loose','btn-danger':command.severity=='Destroy'}"
                            ng-click="invokeCommand(command)"><i ng-if="command.icon" class="fa fa-{{::command.icon}}">&nbsp;</i>{{::translate(command.text)}}</button>
                </div>
            </div>
        </form>
    </script>
    <script type="text/ng-template" id="uidl-element-template/FormBigFrontEnd">
        <form class="form-horizontal" id="{{::uidl.elementName}}">
            <!-- PLAIN FIELDS SINGLE COLUMN LAYOUT -->
            <div class="form-group" ng-repeat-start="field in plainFields" style="margin-bottom:0">
                <label class="control-label col-sm-4"
                       for="{{::uidl.elementName + '_' + field.propertyName}}">{{::translate(field.propertyName, { upperCase: true })}}</label>
                <div class="col-sm-8"><uidl-form-field parent-uidl="uidl" uidl="field" entity="model.Data.entity" /></div>
            </div>
            <div ng-repeat-end class="hr-line-dashed"></div>
            <!-- COMMAND BUTTONS -->
            <div ng-if="uidl.commands.length" class="form-group">
                <div class="col-sm-8 col-sm-offset-4">
                    <button ng-repeat="command in uidl.commands"
                            type="button"
                            class="btn"
                            style="margin-right: 5px;"
                            ng-disabled="commandInProgress"
                            ng-class="{'btn-success':command.severity=='Read','btn-primary':command.severity=='Change','btn-warning':command.severity=='Loose','btn-danger':command.severity=='Destroy', 'btn-white':command.severity=='None'}"
                            ng-click="invokeCommand(command)"><i ng-if="command.icon" class="fa fa-{{::command.icon}}">&nbsp;</i>{{::translate(command.text)}}</button>
                </div>
            </div>
        </form>
    </script>
    <script type="text/ng-template" id="uidl-element-template/FormLoginStyle">
        <form class="m-t" role="form" id="{{::uidl.elementName}}" novalidate autocomplete="off">
            <div class="form-group" ng-repeat="field in plainFields">
                <uidl-form-field parent-uidl="uidl" uidl="field" entity="model.Data.entity" template-name="FormFieldLoginStyle"></uidl-form-field>
            </div>
            <button ng-repeat="command in uidl.commands"
                    class="btn block full-width m-b"
                    ng-class="{'btn-primary':command.severity!='None', 'btn-white':command.severity=='None'}"                    
                    ng-disabled="commandInProgress"
                    ng-click="invokeCommand(command)"><i ng-if="command.icon" class="fa fa-{{::command.icon}}">&nbsp;</i>{{::translate(command.text)}}</button>
        </form>
    </script>
    <script type="text/javascript">
        function initWidget_Form($scope) {
            var validationRules = { };
            for (var i = 0; i < $scope.plainFields.length ; i++) {
                var field = $scope.plainFields[i];
                var fieldElementId = $scope.uidl.elementName + '_' + field.propertyName;
                var fieldRules = { 
                    required: field.validation.isRequired===true,
                    email: field.semantic==='EmailAddress',
                    phoneUS: field.semantic==='PhoneNumber',
                    url: field.semantic==='Url' || field.semantic==='ImageUrl'
                };
                if (field.validation.minLength!==null) {
                    fieldRules.minlength = field.validation.minLength;
                }
                if (field.validation.maxLength!==null) {
                    fieldRules.maxlength = field.validation.maxLength;
                }
                validationRules[fieldElementId] = fieldRules;
                if (field.modifiers.indexOf('Password') > -1 && field.modifiers.indexOf('Confirm') > -1) {
                    validationRules[fieldElementId + '__confirm'] = {
                        equalTo: '#' + fieldElementId
                    };
                }
            }
            $scope.$on(':global:FormValidating', function (event, data) {
                var form = $('#' + $scope.uidl.elementName);
                if (form.length && !form.valid()) {
                    data.isValid = false;
                }
            });
            $scope.$on($scope.uidl.qualifiedName + ':StateResetter', function () {
                if ($scope.jqueryFormValidator) {
                    $scope.jqueryFormValidator.resetForm();
                    var form = $('#' + $scope.uidl.elementName);
                    form.find('.error').removeClass("error");
                }
            });
            $scope.$on($scope.uidl.qualifiedName + ':ModelSetter', function () {
                if ($scope.jqueryFormValidator) {
                    $scope.jqueryFormValidator.resetForm();
                    var form = $('#' + $scope.uidl.elementName);
                    form.find('.error').removeClass("error");
                }
            });
            $scope.$timeout(function() {
                $scope.jqueryFormValidator = $('#' + $scope.uidl.elementName).validate({
                    rules: validationRules
                });
            });
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - FORM FIELD
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/FormField">
        <div>
            <!-- LABEL -->
            <input ng-if="uidl.fieldType==='Label'" 
                   readonly="" 
                   class="form-control m-b" 
                   type="text" 
                   ng-model="entity[uidl.propertyName]" 
                   id="{{::uniqueFieldId}}" 
                   name="{{::uniqueFieldId}}">
            <!-- CHECKBOX -->
            <div ng-if="uidl.fieldType==='Edit' && uidl.modifiers==='Checkbox'" class="onoffswitch">
                <input type="checkbox" 
                       class="onoffswitch-checkbox" 
                       ng-model="entity[uidl.propertyName]" 
                       id="{{::uniqueFieldId}}"
                       name="{{::uniqueFieldId}}">
                <label class="onoffswitch-label" 
                       for="{{::uniqueFieldId}}" 
                       style="margin: 5px 0px 5px 0px;">
                    <span class="onoffswitch-inner"></span>
                    <span class="onoffswitch-switch"></span>
                </label>
            </div>
            <!-- TEXT -->
            <input ng-if="uidl.fieldType==='Edit' && uidl.modifiers==='None'"
                   class="form-control m-b"
                   type="text"
                   ng-model="entity[uidl.propertyName]"
                   id="{{::uniqueFieldId}}"
                   name="{{::uniqueFieldId}}">
            <!-- PASSWORD -->
            <div ng-if="uidl.fieldType==='Edit' && uidl.modifiers==='Password'" class="m-b">
                <div>
                    <input class="form-control"
                           type="password"
                           ng-model="entity[uidl.propertyName]"
                           id="{{::uniqueFieldId}}"
                           name="{{::uniqueFieldId}}">
                </div>
                <div>
                    <label style="margin:3px 0 3px 0;font-weight:normal;">Confirm:</label>
                </div>
                <div>
                    <input ng-if="uidl.fieldType==='Edit' && uidl.modifiers==='Password'"
                           class="form-control"
                           type="password"
                           ng-model="hiddenValues[uidl.propertyName]"
                           id="{{::uniqueFieldId + '__confirm'}}"
                           name="{{::uniqueFieldId + '__confirm'}}">
                 </div>
            </div>
            <!-- DATE-TIME PICKER -->
            <div ng-if="uidl.fieldType==='Edit' && uidl.modifiers==='DateTimePicker'"
                 class="input-group date m-b">
                <input type="text"
                       class="form-control"
                       ng-model="entity[uidl.propertyName]"
                       id="{{::uniqueFieldId}}"
                       name="{{::uniqueFieldId}}">
                <div class="input-group-addon">
                    <span class="glyphicon glyphicon-th"></span>
                </div>
            </div>
            <!-- LOOKUP ELLIPSIS -->
            <div ng-if="uidl.fieldType==='Lookup' && hasUidlModifier('Ellipsis')"
                 class="input-group m-b">
                 <input type="text" 
                        class="form-control"
                        ng-init="isNowFocused=false" 
                        ng-focus="isNowFocused=!hasUidlModifier('ReadOnly')" 
                        ng-blur="isNowFocused=false"                        
                        ng-model="entity[uidl.propertyName]"
                        readonly
                        id="{{::uniqueFieldId}}"
                        name="{{::uniqueFieldId}}"> 
                 <span class="input-group-btn"> 
                     <button type="button" 
                             class="btn" 
                             ng-disabled="hasUidlModifier('ReadOnly')"
                             ng-class="{'btn-primary':isNowFocused, 'btn-white':!isNowFocused}"
                             ng-click="ellipsisClicked()">
                        <i class="fa fa-search"></i>
                     </button>
                 </span>
            </div>            
            <!-- DROP DOWN -->
            <select ng-if="uidl.fieldType==='Lookup' && hasUidlModifier('DropDown')"
                    class="form-control m-b"
                    ng-options="item[lookupValueProperty] as item[lookupTextProperty] for item in lookupResultSet"
                    ng-model="entity[lookupForeignKeyProperty]"
                    id="{{::uniqueFieldId}}"
                    name="{{::uniqueFieldId}}">
                <option value="" ng-if="hasUidlModifier('LookupShowSelectAll')">All</option>
            </select>
            <!-- TYPEAHEAD -->
            <input ng-if="uidl.fieldType==='Lookup' && hasUidlModifier('TypeAhead')"
                type="text" 
                ng-model="entity[lookupForeignKeyProperty]" 
                placeholder="None Selected" 
                typeahead="item as item for item in loadTypeAhead($viewValue)" 
                typeahead-input-formatter="formatTypeAheadItem($model)"
                typeahead-loading="isLoadingTypeAhead" 
                typeahead-no-results="isTypeAheadResultSetEmpty" 
                typeahead-on-select="entity[lookupForeignKeyProperty]=$item['$id']"
                class="form-control m-b"
                id="{{::uniqueFieldId}}"
                name="{{::uniqueFieldId}}">
            <!-- IMAGE UPLOAD -->
            <div ng-if="uidl.fieldType==='ImageUpload'" class="col-sm-3">
                <img ng-src="entity/queryImage/ProfilePhoto/{{::entity[uidl.propertyName]}}/ImageType/ImageContents" class="img-circle circle-border m-b-md" alt="profile">                
            </div>
            <div ng-if="uidl.fieldType==='ImageUpload'" class="col-sm-5">
                <div class="dropzone-previews"></div>
                <div class="dz-default dz-message">
                    <span>Drop photo image file here to upload</span>
                </div>
            </div>
            <div ng-if="uidl.fieldType==='ImageUpload'" class="col-sm-5">
                <button type="submit" class="btn btn-primary pull-right" disabled="">Use New Photo</button>
            </div>
        </div>
    </script>
    <script type="text/ng-template" id="uidl-element-template/FormFieldLoginStyle">
        <div>
            <!-- LABEL -->
            <h3 ng-if="uidl.fieldType==='Label'" ng-bind="entity[uidl.propertyName]"></h3>
            <!-- TEXT -->
            <input ng-if="uidl.fieldType==='Edit' && uidl.modifiers==='None'"
                   class="form-control"
                   type="text"
                   placeholder="{{::translate(uidl.propertyName)}}"
                   ng-model="entity[uidl.propertyName]"
                   id="{{::uniqueFieldId}}"
                   name="{{::uniqueFieldId}}">
            <!-- PASSWORD -->
            <input ng-if="uidl.fieldType==='Edit' && hasUidlModifier('Password')"
                   class="form-control"
                   type="password"
                   placeholder="{{::translate(uidl.propertyName)}}"
                   ng-model="entity[uidl.propertyName]"
                   id="{{::uniqueFieldId}}"
                   name="{{::uniqueFieldId}}">
            <input ng-if="uidl.fieldType==='Edit' && hasUidlModifier('Password') && hasUidlModifier('Confirm')"
                   class="form-control"
                   style="margin-top:15px;"
                   type="password"
                   placeholder="Confirm password"
                   ng-model="hiddenValues[uidl.propertyName]"
                   id="{{::uniqueFieldId + '__confirm'}}"
                   name="{{::uniqueFieldId + '__confirm'}}">
            <!-- DROP DOWN -->
            <select ng-if="uidl.fieldType==='Lookup' && hasUidlModifier('DropDown')"
                    class="form-control m-b"
                    ng-options="item[lookupValueProperty] as item[lookupTextProperty] for item in lookupResultSet"
                    ng-model="entity[lookupForeignKeyProperty]"
                    id="{{::uniqueFieldId}}"
                    name="{{::uniqueFieldId}}">
                <option value="">- {{::translate(uidl.propertyName)}} -</option>
            </select>
            <!-- TYPEAHEAD -->
            <input ng-if="uidl.fieldType==='Lookup' && hasUidlModifier('TypeAhead')"
                type="text" 
                ng-model="entity[lookupForeignKeyProperty]" 
                placeholder="None Selected" 
                typeahead="item in loadTypeAhead($viewValue)" 
                typeahead-input-formatter="formatTypeAheadItem($model)"
                typeahead-loading="isLoadingTypeAhead" 
                typeahead-no-results="isTypeAheadResultSetEmpty" 
                typeahead-on-select="entity[lookupForeignKeyProperty]=$item['$id']"
                class="form-control m-b"
                id="{{::uniqueFieldId}}"
                name="{{::uniqueFieldId}}">
        </div>
    </script>
    <script type="text/javascript">
        function initWidget_FormField($scope) {
            var dateTimePickerValueChanged = function(e) {
                if (e.date===false) {
                    $scope.entity[$scope.uidl.propertyName] = null;
                } else {
                    $scope.entity[$scope.uidl.propertyName] = e.date.format('YYYY-MM-DD HH:mm:ss');
                }
            };
            if ($scope.uidl.modifiers === 'DateTimePicker') {
                $('#' + $scope.uniqueFieldId).datetimepicker({
                    format: 'YYYY-MM-DD HH:mm:ss',
                    allowInputToggle: true
                })
                .on('dp.change', dateTimePickerValueChanged);
            }
        }
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - CHAT
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Chat">
        <div>Message 1 . . . </div>
        <div>Message 2 . . . </div>
        <div>Message 3 . . . </div>
        <textarea></textarea>
        <button>Send</button>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - CHART
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Chart">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h2>
                    {{::translate(uidl.text)}}
                </h2>
                <div class="ibox-tools">
                    <div class="btn-group" ng-repeat="command in uidl.commands" ng-if="command.nodeType==='CommandGroup'">
                        <button 
                            ng-repeat="item in command.items" 
                            ng-click="invokeCommand(command, item)" 
                            ng-class="{'btn-primary':item.isChecked===true, 'btn-white':item.isChecked!==true}"
                            class="btn" 
                            type="button">{{::translate(item.text)}}</button>
                    </div>                
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>                
            </div>
            <div class="ibox-content">
                <div class="m-t-sm">
                    <div class="row" ng-controller="chartJsController">
                        <div class="col-md-10">
                            <div>
                                <canvas id="{{uidl.qualifiedName}}_context" width="1000" height="250"></canvas>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <ul class="stat-list m-t-lg">
                                <li ng-repeat="sum in lineData.summaries">
                                    <h1 class="no-margins">{{::sum.Value}}</h1>
                                    <small>{{::translate(sum.Label)}}</small>
                                    <div ng-if="sum.Percent" class="progress progress-mini">
                                        <div class="progress-bar" style="width: {{::sum.Percent}}%;"></div>
                                    </div>
                                </li>
                                <li>
                                    <table>
                                        <tbody>
                                            <tr ng-repeat="legend in lineData.datasets">
                                                <td class="legendColorBox">
                                                    <div style="border:1px solid #ccc;padding:1px">
                                                        <div style="width:4px;height:0;border:5px solid {{ legend.fillColor }};overflow:hidden"></div>
                                                    </div>
                                                </td>
                                                <td class="legendLabel">{{::translate(legend.label)}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--div class="m-t-md">
                    <small class="pull-right">
                        <i class="fa fa-clock-o"> </i>
                        Update on 16.07.2015
                    </small>
                    <small>
                        <strong>Analysis of sales:</strong> The value has been changed over time, and last month reached a level over $50,000.
                    </small>
                </div-->
            </div>
        </div>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - POINT CHART
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/PointChart">   
        <table ng-if="model.State.data" border="1" style="margin-top: 10px; background: white" cellpadding="3" cellspacing="1">
            <tr>
                <td>&nbsp;</td>
                <td>{{model.State.data.series[0].label}}</td>
                <td>{{model.State.data.series[1].label}}</td>
            </tr>
            <tr ng-repeat="label in model.State.data.labels track by $index">
                <td>{{label}}</td>
                <td>{{model.State.data.series[0].values[$index]}}</td>
                <td>{{model.State.data.series[1].values[$index]}}</td>
            </tr>
        </table>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - TYPE SELECTOR (DEFAULT - COMBO BOX)
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/TypeSelector">
        <form class="form-horizontal">
            <div class="form-group">
                <label class="col-lg-2 control-label">Type</label>
                <div class="col-lg-3">
                    <select ng-options="s.typeName as (s.text | translated) for s in uidl.selections" ng-model="selectedType.name" ng-change="selectedTypeChanged(selectedType.name)" class="form-control m-b"></select>
                </div>
            </div>
        </form>
        <uidl-widget ng-repeat="selection in uidl.selections" ng-if="selectedType.name==selection.typeName" uidl="selection.widget" parent-model="model.entity"></uidl-widget>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - TYPE SELECTOR WITH TABS
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/TypeSelectorWithTabs">
        <div class="tabs-container">
            <ul class="nav nav-tabs">
                <li ng-class="{active: selectedTabIndex===$index}" ng-repeat="selection in uidl.selections"><a ng-click="selectTabByIndex($index)">{{translate(selection.text)}}</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane" ng-repeat="selection in uidl.selections" ng-class="{active: selectedTabIndex===$index}">
                    <div class="panel-body">
                        <uidl-widget ng-if="selectedTabIndex===$index" uidl="selection.widget"></uidl-widget>
                    </div>
                </div>
            </div>
        </div>
    </script>	
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - TYPE SELECTOR WITH ACCORDION
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/TypeSelectorWithAccordion">
        <div class="panel panel-default" style="border:0;margin:0;" id="{{::uidl.elementName}}">
            <div ng-repeat-start="selection in uidl.selections" class="panel-heading" style="cursor:pointer" ng-click="selectedTypeChanged(selection.typeName)">
                <div class="pull-right">
                    <i ng-if="selection.widget.icon" class="fa fa-{{::selection.widget.icon}} text-success"></i>
                </div>
                <h5 class="panel-title">
                    {{::translate(selection.text)}}
                </h5>
            </div>
            <div ng-repeat-end id="{{::selection.widget.elementName}}" style="padding:0;margin:0">
                <div ng-if="selectedTabIndex===$index" class="row" style="padding:30px 20px;">
                    <div class="col-md-12">
                        <uidl-widget uidl="selection.widget"></uidl-widget>
                    </div>
                </div>
            </div>
        </div>
    </script>	
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - FILTER FORM
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/FilterForm">
        <div class="panel-body" id="filterForm">
            <div class="row">
                <div class="form-group">
                    <div class="col-sm-2" ng-repeat="field in uidl.fields">
                        <label class="control-label">{{ field.propertyName }}</label>
                        <uidl-form-field uidl="field" entity="parentModel.entity" />
                    </div>
                </div>
                <div class="col-sm-1">
                    <div class="ibox-tools"><button id="mediaSearch" type="button" class="btn btn-primary" ng-click="executeSearch()">Search123</button></div>
                </div>
            </div>
        </div>
    </script>	

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - REPORT
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Report">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <uidl-widget uidl="uidl.criteriaForm"></uidl-widget>
                <uidl-widget uidl="uidl.resultTable"></uidl-widget>
            </div>
        </div>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - CHART REPORT
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/ChartReport">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <uidl-widget uidl="uidl.criteriaForm"></uidl-widget>
                <uidl-widget uidl="uidl.resultChart"></uidl-widget>
            </div>
        </div>
    </script>

    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - DASHBOARD
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/Dashboard">
        <div class="row">
            <div class="col-lg-2" ng-repeat="widget in uidl.widgets" ng-if="widget.widgetType=='Gauge'" style="vertical-align:top;">
                <uidl-widget uidl="widget"></uidl-widget>
            </div>
        </div>
        <div class="row" ng-repeat="widget in uidl.widgets" ng-if="widget.widgetType=='Chart'">
            <div class="col-lg-12" style="vertical-align:top;">
                <uidl-widget uidl="widget"></uidl-widget>
            </div>
        </div>
    </script>
    
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
    UIDL WIDGET - GRID FIELD
    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <script type="text/ng-template" id="uidl-element-template/GridField">
        <div class="layout">
            <span ng-if="property.kind!=='Relation'">{{value}}</span>
            <a ng-if="property.kind==='Relation'">Go to</a>
        </div>
    </script>
        
    <!------ HARD CODED  -------->
    
    <script type="text/ng-template" id="uidl-element-template/AffiliateSignUpForm">
        <div class="middle-box text-center loginscreen   animated fadeInDown">
            <div>
                <div>
                    <h1 class="logo-name">AFP</h1>
                </div>
                <h2>Sign Up</h2>
                <p>Apply for an affiliate account.</p>
                <form class="m-t" role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Your Name" required="" ng-model="model.Data.FullName" >
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control" placeholder="Email" required="" ng-model="model.Data.EmailAddress" >
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Phone Number" required="" ng-model="model.Data.PhoneNumber" >
                    </div>
                    <!--div class="form-group">
                            <div class="checkbox i-checks"><label> <input type="checkbox"><i></i> Agree the terms and policy </label></div>
                    </div-->
                    <button class="btn btn-primary block full-width m-b" ng-click="$emit(uidl.qualifiedName + ':SignUp:Executing')">Apply</button>

                    <!--p class="text-muted text-center"><small>Already have an account?</small></p>
                    <a class="btn btn-sm btn-white btn-block" href="login.html">Login</a-->
                </form>
                <p class="m-t"> <small>Powered by BitWize</small> </p>
            </div>
        </div>
    </script>
    
    <!-- Javascript frameworks -->
    <script src="skin/assets/js/jquery-2.1.1.js"></script>
    <script src="skin/assets/js/bootstrap.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="skin/assets/js/inspinia.js"></script>
    <script src="skin/assets/js/plugins/pace/pace.min.js"></script>
    <script src="skin/assets/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Chosen -->
    <script src="skin/assets/js/plugins/chosen/chosen.jquery.js"></script>

    <!-- JSKnob -->
    <script src="skin/assets/js/plugins/jsKnob/jquery.knob.js"></script>

    <!-- Input Mask-->
    <script src="skin/assets/js/plugins/jasny/jasny-bootstrap.min.js"></script>

    <!-- Data picker -->
    <script src="skin/assets/js/plugins/datapicker/bootstrap-datepicker.js"></script>

    <!-- NouSlider -->
    <script src="skin/assets/js/plugins/nouslider/jquery.nouislider.min.js"></script>

    <!-- Switchery -->
    <script src="skin/assets/js/plugins/switchery/switchery.js"></script>

    <!-- IonRangeSlider -->
    <script src="skin/assets/js/plugins/ionRangeSlider/ion.rangeSlider.min.js"></script>

    <!-- iCheck -->
    <script src="skin/assets/js/plugins/iCheck/icheck.min.js"></script>

    <!-- MENU -->
    <script src="skin/assets/js/plugins/metisMenu/jquery.metisMenu.js"></script>

    <!-- Color picker -->
    <script src="skin/assets/js/plugins/colorpicker/bootstrap-colorpicker.min.js"></script>

    <!-- Clock picker -->
    <script src="skin/assets/js/plugins/clockpicker/clockpicker.js"></script>

    <!-- Image cropper -->
    <script src="skin/assets/js/plugins/cropper/cropper.min.js"></script>

    <!-- Date range use moment.js same as full calendar plugin -->
    <script src="skin/assets/js/plugins/fullcalendar/moment.min.js"></script>

    <!-- Date range picker -->
    <script src="skin/assets/js/plugins/daterangepicker/daterangepicker.js"></script>

    <!-- Date/time picker -->
    <script src="skin/assets/js/plugins/datetimepicker/bootstrap-datetimepicker.min.js"></script>

    <!-- jqGrid -->
    <script src="skin/assets/js/plugins/jqGrid/i18n/grid.locale-en.js"></script>
    <script src="skin/assets/js/plugins/jqGrid/jquery.jqGrid.min.js"></script>

    <!-- Gritter -->
    <link href="skin/assets/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">

    <!-- Jquery Validate -->
    <script src="skin/assets/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="skin/assets/js/plugins/validate/additional-methods.min.js"></script>

    <!-- Data Tables -->
    <!--script src="skin/assets/js/plugins/dataTables/jquery.dataTables.js"></script>
    <script src="skin/assets/js/plugins/dataTables/dataTables.bootstrap.js"></script>
    <script src="skin/assets/js/plugins/dataTables/dataTables.responsive.js"></script>
    <script src="skin/assets/js/plugins/dataTables/dataTables.tableTools.min.js"></script-->
    
    <script src="skin/assets/app/angular-1.3.16/angular.min.js"></script>
    <script src="skin/assets/js/plugins/chartJs/Chart.min.js"></script>
    <script src="skin/assets/js/plugins/ui-bootstrap-tpls-0.14.3.min.js"></script>

    <!-- Multiselect -->
    <script src="skin/assets/js/plugins/isteven-multi-select/isteven-multi-select.js"></script>
    
    <script src="skin/assets/app/linqjs-2.2.0.2/linq.min.js"></script>
    <script src="skin/assets/app/toastr/toastr.js"></script>
    <script src="base/app.js"></script>
    <script src="base/entity.js"></script>
    <script src="skin/assets/app/chartjs/chart.js"></script>

    <script src="Application.js"></script>
    
    <script>
        $(document).ready(function() {
            toastr.options = {
                closeButton: true,
                progressBar: true,
                showMethod: 'slideDown',
                timeOut: 4000
            };
        });
        
        angular.module('theApp').run(['$rootScope', 'uidlService', 
        function($rootScope, uidlService) {
            $rootScope.showPopupAlert = function(alertHandle) {
                switch (alertHandle.uidl.type) {
                    case 'Info':
                        toastr.info(uidlService.translate(alertHandle.uidl.text));
                        break;
                    case 'Success':
                        toastr.success(uidlService.translate(alertHandle.uidl.text), null, { timeOut: 2000 });
                        break;
                    case 'Warning':
                        toastr.warning(uidlService.translate(alertHandle.uidl.text));
                        break;
                    case 'Error':
                        toastr.error(
                            '<a data-toggle="modal" data-target="#divModalTechnicalInfo"><i class="fa fa-xs fa-angle-double-right"></i>&nbsp;technical info</a>', 
                            uidlService.translate(alertHandle.uidl.text),
                            { timeOut: 5000 });
                        break;
                }
            };
            $rootScope.showModalAlert = function(alertHandle) {
                switch (alertHandle.uidl.type) {
                    case 'Info':
                        toastr.info(uidlService.translate(alertHandle.uidl.text));
                        break;
                    case 'Success':
                        toastr.success(uidlService.translate(alertHandle.uidl.text), null, { timeOut: 2000 });
                        break;
                    case 'Warning':
                        toastr.warning(uidlService.translate(alertHandle.uidl.text));
                        break;
                    case 'Error':
                        toastr.error(
                            '<a data-toggle="modal" data-target="#divModalTechnicalInfo"><i class="fa fa-xs fa-angle-double-right"></i>&nbsp;technical info</a>', 
                            uidlService.translate(alertHandle.uidl.text),
                            { timeOut: 5000 });
                        break;
                }
            };
            $rootScope.beginBrowserDownload = function(url) {
                document.getElementById('iframe_content_download').src = url;
            };
        }]);
        
        /*
        angular.module('theApp').service('skinService', ['$rootScope', '$q', 'uidlService', 
        function($rootScope, $q, uidlService) {
            
            function showPopupAlert(alertHandle) {
                switch (alertHandle.uidl.type) {
                    case 'Info':
                        toastr.info(uidlService.translate(alertHandle.uidl.text));
                        break;
                    case 'Success':
                        toastr.success(uidlService.translate(alertHandle.uidl.text), null, { timeOut: 2000 });
                        break;
                    case 'Warning':
                        toastr.warning(uidlService.translate(alertHandle.uidl.text));
                        break;
                    case 'Error':
                        toastr.error(
                            '<a data-toggle="modal" data-target="#divModalTechnicalInfo"><i class="fa fa-xs fa-angle-double-right"></i>&nbsp;technical info</a>', 
                            uidlService.translate(alertHandle.uidl.text),
                            { timeOut: 5000 });
                        break;
                }
            };

            function showModalAlert(alertHandle) {
                return $q.reject('Not implemented');
            };
            
            return {
                showPopupAlert: showPopupAlert
                showModalAlert: showModalAlert
            };
        }]);
        */
    </script>
</body>
</html>
